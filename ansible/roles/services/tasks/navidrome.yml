---
- name: "navidrome - Ensure plugins directory exists"
  ansible.builtin.file:
    path: "{{ services_base_path }}/navidrome/data/plugins"
    state: directory
    owner: "{{ docker_user }}"
    group: "{{ docker_user }}"
    mode: "0755"
  tags:
    - services

- name: "navidrome - Download AudioMuse-AI plugin"
  ansible.builtin.get_url:
    url: "https://github.com/NeptuneHub/AudioMuse-AI-NV-plugin/releases/download/{{ audiomuse_plugin_version }}/audiomuseai.ndp"
    dest: "{{ services_base_path }}/navidrome/data/plugins/audiomuseai.ndp"
    owner: "{{ docker_user }}"
    group: "{{ docker_user }}"
    mode: "0644"
  tags:
    - services
